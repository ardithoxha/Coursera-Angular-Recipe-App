<div class="recipe-form">
    <h2>Add a New Recipe</h2>
    <form #recipeForm="ngForm" (ngSubmit)="submitRecipe()">
        <label for="name">
            Recipe Name:
            <input
                type="text"
                name="name"
                id="name"
                [(ngModel)]="newRecipe.name"
                required
                minlength="3"
                #name="ngModel"
            >
            @if (name.invalid && name.touched) {
                <div class="error">
                    Recipe name is required and must be at least 3 characters.
                </div>
            }

        </label>
        <label for="ingredients">
            Ingredients:
            <div class="ingredient-list">
                <input type="text" id="ingredients" name="ingredientInput" [(ngModel)]="ingredientInput">
                <button type="button" (click)="addIngredient()" class="add-ingredient">Add Ingredient</button>
            </div>   
            <ul>
                @for (ingredient of newRecipe.ingredients; track $index) {
                    <li>
                        <span>{{ ingredient }}</span>
                        <button type="button" (click)="removeIngredient($index)" class="remove-btn">Remove</button>
                    </li>
                }
            </ul> 
        </label>
        

        <label for="instructions">
            Instructions:
            <textarea
                name="instructions"
                id="instructions"
                [(ngModel)]="newRecipe.instructions"
                minlength="10"
                rows="1"
                #instructions="ngModel"
                required
            ></textarea>
            @if (instructions.invalid && instructions.touched) {
                <div class="error">
                    Insturctions are required and must be at least 10 characters.
                </div>
            }
        </label>

        <label for="imageUrl">
            Image Url:
            <input
                type="text"
                id="imageUrl"
                [(ngModel)]="newRecipe.imageUrl"
                name="imageUrl"
                #imageUrl="ngModel"
                required
            >
            @if (imageUrl.invalid && imageUrl.touched) {
                <div class="error">
                    Please enter a valid image url.
                </div>
            }
        </label>

        <button [disabled]="recipeForm.invalid" type="submit">Add</button>
    </form>
</div>